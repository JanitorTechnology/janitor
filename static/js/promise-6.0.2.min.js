!(function (e) { function n () {} function t (e, n) { return function () { e.apply(n, arguments); }; } function o (e) { if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new'); if (typeof e !== 'function') throw new TypeError('not a function'); this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], s(e, this); } function i (e, n) { for (;e._state === 3;)e = e._value; return e._state === 0 ? void e._deferreds.push(n) : (e._handled = !0, void o._immediateFn(function () { var t = e._state === 1 ? n.onFulfilled : n.onRejected; if (t === null) return void (e._state === 1 ? r : u)(n.promise, e._value); var o; try { o = t(e._value); } catch (i) { return void u(n.promise, i); }r(n.promise, o); })); } function r (e, n) { try { if (n === e) throw new TypeError('A promise cannot be resolved with itself.'); if (n && (typeof n === 'object' || typeof n === 'function')) { var i = n.then; if (n instanceof o) return e._state = 3, e._value = n, void f(e); if (typeof i === 'function') return void s(t(i, n), e); }e._state = 1, e._value = n, f(e); } catch (r) { u(e, r); } } function u (e, n) { e._state = 2, e._value = n, f(e); } function f (e) { e._state === 2 && e._deferreds.length === 0 && o._immediateFn(function () { e._handled || o._unhandledRejectionFn(e._value); }); for (var n = 0, t = e._deferreds.length; n < t; n++)i(e, e._deferreds[n]); e._deferreds = null; } function c (e, n, t) { this.onFulfilled = typeof e === 'function' ? e : null, this.onRejected = typeof n === 'function' ? n : null, this.promise = t; } function s (e, n) { var t = !1; try { e(function (e) { t || (t = !0, r(n, e)); }, function (e) { t || (t = !0, u(n, e)); }); } catch (o) { if (t) return; t = !0, u(n, o); } } var a = setTimeout; o.prototype['catch'] = function (e) { return this.then(null, e); }, o.prototype.then = function (e, t) { var o = new this.constructor(n); return i(this, new c(e, t, o)), o; }, o.all = function (e) { var n = Array.prototype.slice.call(e); return new o(function (e, t) { function o (r, u) { try { if (u && (typeof u === 'object' || typeof u === 'function')) { var f = u.then; if (typeof f === 'function') return void f.call(u, function (e) { o(r, e); }, t); }n[r] = u, --i === 0 && e(n); } catch (c) { t(c); } } if (n.length === 0) return e([]); for (var i = n.length, r = 0; r < n.length; r++)o(r, n[r]); }); }, o.resolve = function (e) { return e && typeof e === 'object' && e.constructor === o ? e : new o(function (n) { n(e); }); }, o.reject = function (e) { return new o(function (n, t) { t(e); }); }, o.race = function (e) { return new o(function (n, t) { for (var o = 0, i = e.length; o < i; o++)e[o].then(n, t); }); }, o._immediateFn = typeof setImmediate === 'function' && function (e) { setImmediate(e); } || function (e) { a(e, 0); }, o._unhandledRejectionFn = function (e) { typeof console !== 'undefined' && console && console.warn('Possible Unhandled Promise Rejection:', e); }, o._setImmediateFn = function (e) { o._immediateFn = e; }, o._setUnhandledRejectionFn = function (e) { o._unhandledRejectionFn = e; }, typeof module !== 'undefined' && module.exports ? module.exports = o : e.Promise || (e.Promise = o); }(this));
